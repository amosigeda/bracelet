<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wtwd.gms.dao.impl.WtStorageInfoDaoImpl">
	<resultMap id="BaseResultMap" type="com.wtwd.gms.entity.WtStorageInfo">
		<id column="id" property="id" jdbcType="BIGINT" />
		<result column="device_name" property="deviceName" jdbcType="VARCHAR" />
		<result column="num" property="num" jdbcType="INTEGER" />
		<result column="total" property="total" jdbcType="INTEGER" />
		<result column="status" property="status" jdbcType="VARCHAR" />
		<result column="inventory" property="inventory" jdbcType="INTEGER" />
		<result column="operator" property="operator" jdbcType="VARCHAR" />
		<result column="edit_time" property="editTime" jdbcType="TIMESTAMP" />
	</resultMap>

	<sql id="Base_Column_List">
		id, device_name, num, total, status, inventory, operator, edit_time
	</sql>

	<sql id="Wt_Storage_Info">wt_storage_info</sql>
	
	<!-- 根据搜索条件获取数据 -->
	<sql id="condition_sql">
		<if test="beginDate != null and endDate != null and beginDate != '' and endDate != '' ">
			and edit_time between #{beginDate} and CONCAT(#{endDate},' 23:59:59') 
		</if>
	</sql>

	<select id="listBy" resultMap="BaseResultMap" parameterType="java.util.Map">
		select
		<include refid="Base_Column_List" />
		from <include refid="Wt_Storage_Info" />
		<where>
			<include refid="condition_sql" />
		</where>
		order by edit_time desc 
	</select>
	<!-- 删除存储记录 -->
	<delete id="deleteStorageInfo" parameterType="java.util.Map">
		delete  from <include refid="Wt_Storage_Info" />
		<where>
			<include refid="delete_condition"/>
		</where>
	</delete>
	<sql id="delete_condition">
		<if test="devName != null and devName !=''">
			and device_name = #{devName}
		</if>
		<if test="createTime != null and createTime !=''">
			and edit_time = #{createTime}
		</if>
	</sql>
	<!-- 查询所有数据 -->
	<select id="queryDataInfo" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from <include refid="Wt_Storage_Info" />
	</select>
	<select id="queryStorageInfoByWorkerName" resultMap="BaseResultMap" parameterType="String">
		select <include refid="Base_Column_List"/>
		from <include refid="Wt_Storage_Info"/>
		<where>
			operator=#{operator,jdbcType=VARCHAR}
		</where>
	</select>
	<!--  -->
	<select id="queryStorageInfoByCondition" resultMap="BaseResultMap" parameterType="java.util.Map">
		select * from <include refid="Wt_Storage_Info" />
		<where>
			<include refid="queryStorageInfo_condition"/>
		</where>
	</select>
	<sql id="queryStorageInfo_condition">
		<if test="begainDate != null and  begainDate != '' and  endDate != null and endDate !=''">
			and edit_time between CONCAT(#{begainDate},' 00:00:00')  and CONCAT(#{endDate},' 23:59:59') 
		</if>
		<if test="operator != null and operator !=''">
			and operator = #{operator}
		</if>
	</sql>
	<!-- 新增设备入库记录 --> 
	<insert id="insert" parameterType="com.wtwd.gms.entity.WtStorageInfo">
		insert into <include refid="Wt_Storage_Info" />
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="deviceName != null">
				device_name,
			</if>
			<if test="num != null">
				num,
			</if>
			<if test="total != null">
				total,
			</if>
			<if test="status != null">
				status,
			</if>
			<if test="inventory != null">
				inventory,
			</if>
			<if test="operator != null">
				operator,
			</if>
			<if test="editTime != null">
				edit_time,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=BIGINT},
			</if>
			<if test="deviceName != null">
				#{deviceName,jdbcType=VARCHAR},
			</if>
			<if test="num != null">
				#{num,jdbcType=INTEGER},
			</if>
			<if test="total != null">
				#{total,jdbcType=INTEGER},
			</if>
			<if test="status != null">
				#{status,jdbcType=VARCHAR},
			</if>
			<if test="inventory != null">
				#{inventory,jdbcType=INTEGER},
			</if>
			<if test="operator != null">
				#{operator,jdbcType=VARCHAR},
			</if>
			<if test="editTime != null">
				#{editTime,jdbcType=TIMESTAMP},
			</if>
		</trim>
	</insert>


	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		delete from
		wt_storage_info
		where id = #{id,jdbcType=BIGINT}
	</delete>
	<insert id="insertSelective" parameterType="com.wtwd.gms.entity.WtStorageInfo">
		insert into
		wt_storage_info (id, device_name, num,
		total, status, inventory,
		operator, edit_time)
		values (#{id,jdbcType=BIGINT},
		#{deviceName,jdbcType=VARCHAR},
		#{num,jdbcType=INTEGER},
		#{total,jdbcType=INTEGER}, #{status,jdbcType=VARCHAR},
		#{inventory,jdbcType=INTEGER},
		#{operator,jdbcType=VARCHAR},
		#{editTime,jdbcType=TIMESTAMP})
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.wtwd.gms.entity.WtStorageInfo">
		update wt_storage_info
		<set>
			<if test="deviceName != null">
				device_name = #{deviceName,jdbcType=VARCHAR},
			</if>
			<if test="num != null">
				num = #{num,jdbcType=INTEGER},
			</if>
			<if test="total != null">
				total = #{total,jdbcType=INTEGER},
			</if>
			<if test="status != null">
				status = #{status,jdbcType=VARCHAR},
			</if>
			<if test="inventory != null">
				inventory = #{inventory,jdbcType=INTEGER},
			</if>
			<if test="operator != null">
				operator = #{operator,jdbcType=VARCHAR},
			</if>
			<if test="editTime != null">
				edit_time = #{editTime,jdbcType=TIMESTAMP},
			</if>
		</set>
		where id = #{id,jdbcType=BIGINT}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.wtwd.gms.entity.WtStorageInfo">
		update
		wt_storage_info
		set device_name = #{deviceName,jdbcType=VARCHAR},
		num =
		#{num,jdbcType=INTEGER},
		total = #{total,jdbcType=INTEGER},
		status =
		#{status,jdbcType=VARCHAR},
		inventory = #{inventory,jdbcType=INTEGER},
		operator = #{operator,jdbcType=VARCHAR},
		edit_time =
		#{editTime,jdbcType=TIMESTAMP}
		where id = #{id,jdbcType=BIGINT}
	</update>
</mapper>